{"version":3,"sources":["components/Notification.js","components/Togglable.js","components/NewBlog.js","components/Users.js","components/User.js","components/BlogData.js","utils/storage.js","services/blogs.js","services/login.js","services/users.js","App.js","index.js"],"names":["Notification","notification","style","borderStyle","borderRadius","padding","color","type","background","message","Togglable","React","forwardRef","props","ref","useState","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","useImperativeHandle","onClick","buttonLabel","className","children","displayName","NewBlog","title","setTitle","author","setAuthor","url","setUrl","onSubmit","event","preventDefault","createBlog","id","value","onChange","target","Users","users","map","user","to","name","blogs","length","User","undefined","blog","BlogData","handleLike","addComment","comment","setComment","href","likes","comments","content","storageKey","localStorage","setItem","JSON","stringify","parse","getItem","removeItem","baseUrl","getConfig","headers","Authorization","storage","token","axios","get","then","response","data","post","put","console","log","login","credentials","a","BasicView","setBlogs","setUser","username","setUsername","password","setPassword","setNotification","blogFormRef","createRef","useEffect","blogService","notifyWith","setTimeout","handleLogin","loginService","newBlog","current","concat","sort","b1","b2","App","setUsers","userService","loggedInUser","setLoggedInUser","loggedIn","matchForUser","useRouteMatch","find","String","params","matchForBlog","blogToLike","b","likedBlog","blogToAddComment","commentedBlog","AppBar","position","Toolbar","Button","component","Link","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bdc54564.chunk.js","sourcesContent":["import React from 'react'\n\nconst Notification = ({ notification }) => {\n  if ( !notification ) {\n    return null\n  }\n\n  const style = {\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    color: notification.type === 'success' ? 'green' : 'red',\n    background: 'lightgrey'\n  }\n\n  return <div style={style}>\n    {notification.message}\n  </div>\n}\n\nexport default Notification","import React, { useState, useImperativeHandle } from 'react'\n\nconst Togglable = React.forwardRef((props, ref) => {\n  const [visible, setVisible] = useState(false)\n\n  const hideWhenVisible = { display: visible ? 'none' : '' }\n  const showWhenVisible = { display: visible ? '' : 'none' }\n\n  const toggleVisibility = () => {\n    setVisible(!visible)\n  }\n\n  useImperativeHandle(ref, () => {\n    return {\n      toggleVisibility\n    }\n  })\n\n  return (\n    <div>\n      <div style={hideWhenVisible}>\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\n      </div>\n      <div style={showWhenVisible} className=\"togglableContent\">\n        {props.children}\n        <button onClick={toggleVisibility}>cancel</button>\n      </div>\n    </div>\n  )\n})\n\nTogglable.displayName = 'Togglable'\n\nexport default Togglable","import React, { useState } from 'react'\n\nconst NewBlog = (props) => {\n  const [title, setTitle] = useState('')\n  const [author, setAuthor] = useState('')\n  const [url, setUrl] = useState('')\n\n  const handleNewBlog = (event) => {\n    event.preventDefault()\n\n    props.createBlog({\n      title, author, url\n    })\n\n    setTitle('')\n    setAuthor('')\n    setUrl('')\n  }\n\n  return (\n    <div>\n      <h2>create new</h2>\n      <form onSubmit={handleNewBlog}>\n        <div>\n          author\n          <input\n            id='author'\n            value={author}\n            onChange={({ target }) => setAuthor(target.value)}\n          />\n        </div>\n        <div>\n          title\n          <input\n            id='title'\n            value={title}\n            onChange={({ target }) => setTitle(target.value)}\n          />\n        </div>\n        <div>\n          url\n          <input\n            id='url'\n            value={url}\n            onChange={({ target }) => setUrl(target.value)}\n          />\n        </div>\n        <button id=\"create\">create</button>\n      </form>\n    </div>\n  )\n}\n\nexport default NewBlog","import React from 'react'\nimport {\n  Link\n} from 'react-router-dom'\n\nconst Users = ({ users }) => {\n\n  return (\n    <div>\n      <h1>Users</h1>\n      <table>\n        <tr>\n          <td> </td>\n          <td> <b> blogs created </b> </td>\n        </tr>\n\n        {users.map(user => {\n          return (\n            <tr key={user.id}>\n              <td>\n                <div>\n                  <Link to= {`/user/${user.id}`}>{user.name}</Link>\n                </div>\n              </td>\n              <td> {user.blogs.length} </td>\n            </tr>\n          )})}\n      </table>\n    </div>\n  )\n}\nexport default Users","import React from 'react'\n\nconst User = ({ user }) => {\n\n  if (user === undefined) {\n    return null\n  }\n\n  const blogs = user.blogs\n\n  return (\n    <div>\n      <h1>{user.name}</h1>\n      <br></br>\n      <b>Added blogs</b>\n      <p></p>\n\n      {blogs.map(blog => {\n        return (\n          <li key = {blog.id}> {blog.title}</li>\n        )})}\n    </div>\n  )\n}\nexport default User","import React, { useState } from 'react'\n\nconst BlogData = ({ blog, handleLike, addComment }) => {\n\n  const [comment, setComment] = useState('')\n\n  const handleNewComment = (event) => {\n    event.preventDefault()\n    const id = blog.id\n\n    addComment(id , comment)\n    setComment('')\n  }\n\n  if (blog === undefined) {\n    return null\n  }\n\n  return (\n    <div>\n      <h1>{blog.title}</h1>\n      <a href={blog.url}>{blog.url}</a>\n      <p>likes {blog.likes}\n        <button onClick={() => handleLike(blog.id)}>like</button> </p>\n      <p>added by {blog.user.name} </p>\n      <br></br>\n\n\n      <form onSubmit={handleNewComment}>\n        <div>\n          <input\n            id='comment'\n            value={comment}\n            onChange={({ target }) => setComment(target.value)}\n          />\n        </div>\n        <button id=\"addComment\">add comment</button>\n      </form>\n\n\n      <h3>Comments</h3>\n      {blog.comments.map(comment => {\n        return (\n          <li key = {comment.id}> {comment.content} </li>\n        )}\n      )}\n    </div>\n  )\n}\nexport default BlogData","const storageKey = 'loggedBlogAppUser'\n\nconst saveUser = (user) =>\n  localStorage.setItem(storageKey, JSON.stringify(user))\n\nconst loadUser = () =>\n  JSON.parse(localStorage.getItem(storageKey))\n\nconst logoutUser = () =>\n  localStorage.removeItem(storageKey)\n\nexport default {\n  saveUser,\n  loadUser,\n  logoutUser\n}","import axios from 'axios'\nimport storage from '../utils/storage'\n\nconst baseUrl = '/api/blogs'\n\nconst getConfig = () => {\n  return {\n    headers: { Authorization: `bearer ${storage.loadUser().token}` }\n  }\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = (blog) => {\n  const request = axios.post(baseUrl, blog, getConfig())\n  return request.then(response => response.data)\n}\n\nconst addComment = (id, comment) => {\n\n  console.log('täällä kommentti on: ', comment)\n  const request = axios.post(`${baseUrl}/${id}/comments`, { id, comment })\n  return request.then(response => response.data)\n}\n\nconst update = (blog) => {\n  const request = axios.put(`${baseUrl}/${blog.id}`, blog, getConfig())\n  return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`, getConfig())\n  return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, remove, addComment }","import axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async credentials => {\n  const response = await axios.post(baseUrl, credentials)\n  return response.data\n}\n\nexport default { login }","import axios from 'axios'\n\nconst baseUrl = '/api/users'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nexport default { getAll }","import React, { useState, useEffect } from 'react'\nimport Notification from './components/Notification'\nimport Togglable from './components/Togglable'\nimport NewBlog from './components/NewBlog'\nimport Users from './components/Users'\nimport User from './components/User'\nimport BlogData from './components/BlogData'\nimport { AppBar, Toolbar, Button } from '@mui/material'\n\nimport blogService from './services/blogs'\nimport loginService from './services/login'\nimport userService from './services/users'\n\nimport {\n  Switch, Route, useRouteMatch, Link\n} from 'react-router-dom'\n\nimport storage from './utils/storage'\n\n\n\nconst App = () => {\n\n  const [users, setUsers] = useState([])\n  const [blogs, setBlogs] = useState([])\n\n\n  useEffect(() => {\n    userService.getAll().then(users =>\n      setUsers(users)\n    )\n  }, [])\n\n  useEffect(() => {\n    blogService.getAll().then(blogs =>\n      setBlogs(blogs)\n    )\n  }, [])\n\n\n  const [loggedInUser, setLoggedInUser] = useState(null)\n\n  useEffect(() => {\n    const loggedIn = storage.loadUser()\n    setLoggedInUser(loggedIn)\n  }, [])\n\n  const handleLogout = () => {\n    setLoggedInUser(null)\n    storage.logoutUser()\n  }\n\n\n\n  const matchForUser = useRouteMatch('/user/:id')\n  const user = matchForUser ? users.find(user => user.id === String(matchForUser.params.id)) : null\n\n  const matchForBlog = useRouteMatch('/blogs/:id')\n  const blog = matchForBlog ? blogs.find(blog => blog.id === String(matchForBlog.params.id)) : null\n\n  const handleLike = async (id) => {\n    const blogToLike = blogs.find(b => b.id === id)\n\n    if(blogToLike !== undefined) {\n      const likedBlog = { ...blogToLike, likes: blogToLike.likes + 1, user: blogToLike.user.id }\n      await blogService.update(likedBlog)\n      setBlogs(blogs.map(b => b.id === id ?  { ...blogToLike, likes: blogToLike.likes + 1 } : b))\n    }\n  }\n\n  const addComment = async (id, comment) => {\n\n    console.log('OKEI EI TULE EDES TÄNNE? ', id, comment)\n    console.log(blogs)\n\n    const blogToAddComment = blogs.find(b => b.id === id)\n    console.log('?????', blogToAddComment)\n\n\n    const commentedBlog = { ...blogToAddComment, comments: blogToAddComment.comments.concat(comment), user: blogToAddComment.user.id }\n    setBlogs(blogs.map(b => b.id === id ?  { ...commentedBlog, comments: commentedBlog.comments.concat(comment) } : b))\n\n    await blogService.addComment(id, String(comment))\n  }\n\n  return (\n    <div>\n\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Button color=\"inherit\" component={Link} to=\"/\">\n      Blogs\n          </Button>\n          <Button color=\"inherit\" component={Link} to=\"/users\">\n      Users\n          </Button>\n          {loggedInUser\n            ? <em>{loggedInUser.name} logged in <button onClick={handleLogout}>logout</button> </em>\n            : ''\n          }\n        </Toolbar>\n      </AppBar>\n\n\n      <h1>Blog app</h1>\n\n\n      <Switch>\n        <Route path=\"/user/:id\">\n          <User user={user} />\n        </Route>\n        <Route path=\"/users\">\n          <Users users={users}/>\n        </Route>\n        <Route path=\"/blogs/:id\">\n          <BlogData blog={blog} handleLike={handleLike} addComment={addComment} />\n        </Route>\n        <Route path=\"/\">\n          <BasicView />\n        </Route>\n      </Switch>\n    </div>\n  )\n}\n\n\n\nconst BasicView = () => {\n\n  const [blogs, setBlogs] = useState([])\n  const [user, setUser] = useState(null)\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [notification, setNotification] = useState(null)\n\n  const blogFormRef = React.createRef()\n\n  useEffect(() => {\n    blogService.getAll().then(blogs =>\n      setBlogs(blogs)\n    )\n  }, [])\n\n  useEffect(() => {\n    const user = storage.loadUser()\n    setUser(user)\n  }, [])\n\n  const notifyWith = (message, type='success') => {\n    setNotification({\n      message, type\n    })\n    setTimeout(() => {\n      setNotification(null)\n    }, 5000)\n  }\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n    try {\n      const user = await loginService.login({\n        username, password\n      })\n\n      setUsername('')\n      setPassword('')\n      setUser(user)\n      notifyWith(`${user.name} welcome back!`)\n      storage.saveUser(user)\n    } catch(exception) {\n      notifyWith('wrong username/password', 'error')\n    }\n  }\n\n  const createBlog = async (blog) => {\n    try {\n      const newBlog = await blogService.create(blog)\n      blogFormRef.current.toggleVisibility()\n      setBlogs(blogs.concat(newBlog))\n      notifyWith(`a new blog '${newBlog.title}' by ${newBlog.author} added!`)\n    } catch(exception) {\n      console.log(exception)\n    }\n  }\n\n\n  /*\n  const handleLike = async (id) => {\n    const blogToLike = blogs.find(b => b.id === id)\n    const likedBlog = { ...blogToLike, likes: blogToLike.likes + 1, user: blogToLike.user.id }\n    await blogService.update(likedBlog)\n    setBlogs(blogs.map(b => b.id === id ?  { ...blogToLike, likes: blogToLike.likes + 1 } : b))\n  }\n\n  const handleRemove = async (id) => {\n    const blogToRemove = blogs.find(b => b.id === id)\n    const ok = window.confirm(`Remove blog ${blogToRemove.title} by ${blogToRemove.author}`)\n    if (ok) {\n      await blogService.remove(id)\n      setBlogs(blogs.filter(b => b.id !== id))\n    }\n  } */\n\n  if ( !user ) {\n    return (\n      <div>\n\n        <h2>login to application</h2>\n\n        <Notification notification={notification} />\n\n        <form onSubmit={handleLogin}>\n          <div>\n            username\n            <input\n              id='username'\n              value={username}\n              onChange={({ target }) => setUsername(target.value)}\n            />\n          </div>\n          <div>\n            password\n            <input\n              id='password'\n              value={password}\n              onChange={({ target }) => setPassword(target.value)}\n            />\n          </div>\n          <button id='login'>login</button>\n        </form>\n      </div>\n    )\n  }\n\n  const byLikes = (b1, b2) => b2.likes - b1.likes\n\n  return (\n    <div>\n\n      <Notification notification={notification} />\n\n      <Togglable buttonLabel='create new blog'  ref={blogFormRef}>\n        <NewBlog createBlog={createBlog} />\n      </Togglable>\n\n      {blogs.sort(byLikes).map(blog => {\n        return (\n          <li key = {blog.id}> <Link to= {`/blogs/${blog.id}`}>{blog.title} by {blog.author}</Link> </li>\n        )}\n      )}\n    </div>\n  )\n}\n\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport {\n  BrowserRouter as Router\n} from 'react-router-dom'\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root'))"],"sourceRoot":""}