(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),i=n(17),a=n.n(i),o=n(8),s=n(2),u=n.n(s),l=n(5),d=n(3),j=n(0),b=function(e){var t=e.blog,n=e.addNewLike,c=e.deleteBlog,i=e.blogUserIsCurrentUser,a=Object(r.useState)(!1),o=Object(d.a)(a,2),s=o[0],u=o[1],l={display:s?"none":""},b={display:s?"":"none"},p=function(){u(!s)};return Object(j.jsxs)("div",{style:{paddingTop:15,paddingLeft:10,paddingRigth:10,paddingBottom:15,border:"solid",borderWidth:1,marginBottom:10,margin:5},className:"blogStyle",children:[Object(j.jsxs)("div",{id:"firstView",style:l,children:[t.title," ",t.author,Object(j.jsx)("button",{id:"toggleVisibility",onClick:p,children:"view"})]}),Object(j.jsxs)("div",{style:b,className:"showAllBlogData",children:[t.title," ",t.author," ",Object(j.jsx)("button",{id:"hideButton",onClick:p,children:"hide"}),Object(j.jsxs)("p",{children:[t.url," "]}),Object(j.jsxs)("p",{children:["likes ",t.likes," ",Object(j.jsx)("button",{id:"likeButton",onClick:n,children:"like"})]}),Object(j.jsxs)("p",{children:[t.author," "]}),Object(j.jsx)("div",{children:i?Object(j.jsx)("button",{id:"deleteButton",onClick:c,children:"delete"}):null})]})]})};b.displayName="Blog";var p=b,f=c.a.forwardRef((function(e,t){var n=Object(r.useState)(!1),c=Object(d.a)(n,2),i=c[0],a=c[1],o={display:i?"none":""},s={display:i?"":"none"},u=function(){a(!i)};return Object(r.useImperativeHandle)(t,(function(){return{toggleVisibility:u}})),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{style:o,children:Object(j.jsx)("button",{id:"createNew",onClick:u,children:e.buttonLabel})}),Object(j.jsxs)("div",{style:s,children:[e.children,Object(j.jsx)("button",{onClick:u,children:"cancel"})]})]})}));f.displayName="Togglable";var h=f,O=function(e){var t=e.createBlog,n=Object(r.useState)(""),c=Object(d.a)(n,2),i=c[0],a=c[1],o=Object(r.useState)(""),s=Object(d.a)(o,2),u=s[0],l=s[1],b=Object(r.useState)(""),p=Object(d.a)(b,2),f=p[0],h=p[1];return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"create new"}),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({title:i,author:u,url:f}),a(""),l(""),h("")},children:[Object(j.jsxs)("div",{children:["title:",Object(j.jsx)("input",{id:"title",value:i,onChange:function(e){a(e.target.value)}})]}),Object(j.jsxs)("div",{children:["author:",Object(j.jsx)("input",{id:"author",value:u,onChange:function(e){l(e.target.value)}})]}),Object(j.jsxs)("div",{children:["url:",Object(j.jsx)("input",{id:"url",value:f,onChange:function(e){h(e.target.value)}})]}),Object(j.jsx)("button",{id:"createBlogButton",type:"submit",children:"create"})]})]})},v=n(6),g=n.n(v),x="/api/blogs",m=null,w={getAll:function(){return g.a.get(x).then((function(e){return e.data}))},create:function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:m}},e.next=3,g.a.post(x,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateLikes:function(e){return g.a.put("".concat(x,"/").concat(e.id),e).then((function(e){return e.data}))},setToken:function(e){m="bearer ".concat(e)},delet:function(e){var t={headers:{Authorization:m}};return g.a.delete("".concat(x,"/").concat(e.id),t).then((function(e){return e.data}))}},k={login:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=function(e){return null===e.notification?Object(j.jsx)("div",{}):"error"===e.type?Object(j.jsx)("div",{className:"error",children:Object(j.jsx)("p",{children:e.notification})}):Object(j.jsx)("div",{className:"positive",children:Object(j.jsx)("p",{children:e.notification})})},S=(n(42),function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(""),a=Object(d.a)(i,2),s=a[0],b=a[1],f=Object(r.useState)(""),v=Object(d.a)(f,2),g=v[0],x=v[1],m=Object(r.useState)(null),S=Object(d.a)(m,2),B=S[0],C=S[1],N=Object(r.useState)(null),L=Object(d.a)(N,2),T=L[0],U=L[1],I=Object(r.useState)(null),A=Object(d.a)(I,2),D=A[0],J=A[1],R=Object(r.useRef)();Object(r.useEffect)((function(){w.getAll().then((function(e){return c(e)}))}),[]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogappUser");if(e){var t=JSON.parse(e);C(t),w.setToken(t.token)}}),[]);var V=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),window.localStorage.removeItem("loggedBlogappUser"),window.localStorage.clear(),w.setToken(null),C(null),b(""),x("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,k.login({username:s,password:g});case 4:n=e.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(n)),w.setToken(n.token),C(n),b(""),x(""),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(1),J("wrong username or password"),q(),b(""),x("");case 18:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.create(t);case 3:r=e.sent,c(n.concat(r)),R.current.toggleVisibility(),U("A new blog ".concat(t.title," by ").concat(t.author," added")),W(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(l.a)(u.a.mark((function e(t){var r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=12;break}return r=n.find((function(e){return e.id===t.id})),i=Object(o.a)(Object(o.a)({},r),{},{likes:r.likes+1}),e.prev=3,e.next=6,w.updateLikes(i);case 6:c(n.map((function(e){return e.id!==r.id?e:i}))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(u.a.mark((function e(t){var r,i,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(new Boolean(!1),r=window.confirm("Remove blog ".concat(t.title," by ").concat(t.author)),void 0===t||!r){e.next=14;break}return i=n.find((function(e){return e.id===t.id})),e.prev=4,e.next=7,w.delet(i);case 7:a=n.filter((function(e){return e.id!==t.id})),c(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){setTimeout((function(){U(null)}),3e3)},q=function(){setTimeout((function(){J(null)}),3e3)},F=function(e){return void 0!==e.user&&void 0!==B&&null!==e.user&&null!==B&&e.user.username===B.username};return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Blogs"}),Object(j.jsx)("p",{}),Object(j.jsx)("p",{}),Object(j.jsx)(y,{notification:T,type:"positive"}),Object(j.jsx)(y,{notification:D,type:"error"}),null===B?Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Log in to application"}),Object(j.jsxs)("form",{onSubmit:E,children:[Object(j.jsxs)("div",{children:["username",Object(j.jsx)("input",{id:"username",type:"text",value:s,name:"Username",onChange:function(e){var t=e.target;return b(t.value)}})]}),Object(j.jsxs)("div",{children:["password",Object(j.jsx)("input",{id:"password",type:"password",value:g,name:"Password",onChange:function(e){var t=e.target;return x(t.value)}})]}),Object(j.jsx)("button",{id:"login-button",type:"submit",children:"login"})]})]}):Object(j.jsxs)("div",{children:[Object(j.jsxs)("p",{children:[" ",B.name," logged in ",Object(j.jsx)("button",{onClick:V,children:"logout"})," "]}),Object(j.jsx)(h,{buttonLabel:"create new",ref:R,children:Object(j.jsx)(O,{createBlog:z})}),Object(j.jsx)("p",{}),n.sort((function(e,t){return t.likes-e.likes})).map((function(e){return Object(j.jsx)(p,{blog:e,addNewLike:function(){return H(e)},deleteBlog:function(){return P(e)},blogUserIsCurrentUser:F(e)},e.id)}))]})]})});a.a.render(Object(j.jsx)(S,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.d2711406.chunk.js.map